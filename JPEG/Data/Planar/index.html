<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
<link href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400;0,600;1,400;1,600&family=Questrial&display=swap" rel="stylesheet"> 

    <link href="https://kelvin13.github.io/jpeg/style.css" rel="stylesheet"> 
    <title>JPEG.Data.Planar - Swift JPEG Documentation</title>
</head> 
<body>
    <main><nav><div class="navigation-container"><ul><li class="github-icon-container"><a href="https://github.com/kelvin13/jpeg"><span title="Github repository" class="github-icon"></span></a></li><li><a href="https://kelvin13.github.io/jpeg/">Documentation</a></li><li><a href="https://kelvin13.github.io/jpeg/JPEG">JPEG</a></li><li><a href="https://kelvin13.github.io/jpeg/JPEG/Data">Data</a></li><li><span>Planar</span></li></ul></div></nav><section class="introduction"><div class="section-container"><div class="eyebrow">Generic Structure</div><h1 class="topic-heading">JPEG.Data.Planar</h1><p class="topic-blurb">A planar image represented in the spatial domain.</p></div></section><section class="discussion"><div class="section-container"><h2>Declaration</h2><div class="declaration-container"><code class="declaration"><span class="syntax-group"><span class="syntax-keyword">struct</span> </span><span class="syntax-group"><span class="syntax-identifier">Planar</span><span class="syntax-punctuation">&lt;</span><span class="syntax-identifier">Format</span><span class="syntax-punctuation">&gt;</span> </span><span class="syntax-group"><span class="syntax-keyword">where</span><span class="syntax-whitespace">&nbsp;</span><span class="syntax-identifier">Format</span><span class="syntax-punctuation">:</span><a class="syntax-type" href="https://kelvin13.github.io/jpeg/JPEG">JPEG</a><span class="syntax-punctuation">.</span><a class="syntax-type" href="https://kelvin13.github.io/jpeg/JPEG/Format">Format</a></span></code></div><h2>Overview</h2><p>A planar image stores its data in blocks called <em>data units</em>. Each block is an 8Ã—8-pixel square. A planar image always stores a whole number of data units in both dimensions, even if the image dimensions in pixels are not multiples of 8. Because each component in an image has its own sampling factors, the image planes may not have the same size.</p><p>A planar image is the result of applying an <em>inverse discrete cosine transformation</em> to a spectral image. It can be converted back into a spectral image (with some floating point error) with a <em>forward discrete cosine transformation</em>.</p></div></section><section class="topics"><div class="section-container"><h2>Topics</h2><div class="topic"><div class="topic-container-right"><h3>Creating an image</h3></div><div class="topic-container-left"><div class="topic-container-symbol"><code class="signature"><a href="https://kelvin13.github.io/jpeg/JPEG/Data/Planar/init%28size%3Alayout%3Ametadata%3AinitializingWith%3A%29"><span class="signature-group"><span class="signature-highlight">init</span><span class="signature-punctuation">(</span><span class="signature-highlight">size</span><span class="signature-punctuation">:</span><span class="signature-punctuation">(</span><span class="signature-text">x</span><span class="signature-punctuation">:</span><span class="signature-text">Int</span><span class="signature-punctuation">,</span></span><span class="signature-group"> <span class="signature-text">y</span><span class="signature-punctuation">:</span><span class="signature-text">Int</span><span class="signature-punctuation">)</span><span class="signature-punctuation">,</span></span><span class="signature-group"> <span class="signature-highlight">layout</span><span class="signature-punctuation">:</span><span class="signature-text">JPEG</span><span class="signature-punctuation">.</span><span class="signature-text">Layout</span><span class="signature-punctuation">&lt;</span><span class="signature-text">Format</span><span class="signature-punctuation">&gt;</span><span class="signature-punctuation">,</span></span><span class="signature-group"> <span class="signature-highlight">metadata</span><span class="signature-punctuation">:</span><span class="signature-punctuation">[</span><span class="signature-text">JPEG</span><span class="signature-punctuation">.</span><span class="signature-text">Metadata</span><span class="signature-punctuation">]</span><span class="signature-punctuation">,</span></span><span class="signature-group"> <span class="signature-highlight">initializingWith</span><span class="signature-punctuation">:</span><span class="signature-punctuation">(</span><span class="signature-text">Int</span><span class="signature-punctuation">,</span></span><span class="signature-group"> <span class="signature-punctuation">(</span><span class="signature-text">x</span><span class="signature-punctuation">:</span><span class="signature-text">Int</span><span class="signature-punctuation">,</span></span><span class="signature-group"> <span class="signature-text">y</span><span class="signature-punctuation">:</span><span class="signature-text">Int</span><span class="signature-punctuation">)</span><span class="signature-punctuation">,</span></span><span class="signature-group"> <span class="signature-punctuation">(</span><span class="signature-text">x</span><span class="signature-punctuation">:</span><span class="signature-text">Int</span><span class="signature-punctuation">,</span></span><span class="signature-group"> <span class="signature-text">y</span><span class="signature-punctuation">:</span><span class="signature-text">Int</span><span class="signature-punctuation">)</span><span class="signature-punctuation">,</span></span><span class="signature-group"> <span class="signature-text">UnsafeMutableBufferPointer</span><span class="signature-punctuation">&lt;</span><span class="signature-text">UInt16</span><span class="signature-punctuation">&gt;</span><span class="signature-punctuation">)</span></span><span class="signature-group"> <span class="signature-text">throws</span></span><span class="signature-group"> <span class="signature-text">-&gt;</span></span><span class="signature-group"> <span class="signature-punctuation">(</span><span class="signature-punctuation">)</span><span class="signature-punctuation">)</span></span><span class="signature-group"> <span class="signature-text">rethrows</span></span></a></code><p class="topic-symbol-blurb">Creates a planar image with the given image parameters and generator.</p></div><div class="topic-container-symbol"><code class="signature"><a href="https://kelvin13.github.io/jpeg/JPEG/Data/Planar/init%28size%3Alayout%3Ametadata%3A%29"><span class="signature-group"><span class="signature-highlight">init</span><span class="signature-punctuation">(</span><span class="signature-highlight">size</span><span class="signature-punctuation">:</span><span class="signature-punctuation">(</span><span class="signature-text">x</span><span class="signature-punctuation">:</span><span class="signature-text">Int</span><span class="signature-punctuation">,</span></span><span class="signature-group"> <span class="signature-text">y</span><span class="signature-punctuation">:</span><span class="signature-text">Int</span><span class="signature-punctuation">)</span><span class="signature-punctuation">,</span></span><span class="signature-group"> <span class="signature-highlight">layout</span><span class="signature-punctuation">:</span><span class="signature-text">JPEG</span><span class="signature-punctuation">.</span><span class="signature-text">Layout</span><span class="signature-punctuation">&lt;</span><span class="signature-text">Format</span><span class="signature-punctuation">&gt;</span><span class="signature-punctuation">,</span></span><span class="signature-group"> <span class="signature-highlight">metadata</span><span class="signature-punctuation">:</span><span class="signature-punctuation">[</span><span class="signature-text">JPEG</span><span class="signature-punctuation">.</span><span class="signature-text">Metadata</span><span class="signature-punctuation">]</span><span class="signature-punctuation">)</span></span></a></code><p class="topic-symbol-blurb">Creates a planar image with the given image parameters, initializing all image samples to a neutral color.</p></div><div class="topic-container-symbol"><code class="signature"><a href="https://kelvin13.github.io/jpeg/JPEG/Data/Planar/decompress%28stream%3A%29"><span class="signature-group"><span class="signature-text">static</span></span><span class="signature-group"> <span class="signature-text">func</span></span><span class="signature-group"> <span class="signature-highlight">decompress</span><span class="signature-punctuation">&lt;</span><span class="signature-text">Source</span><span class="signature-punctuation">&gt;</span><span class="signature-punctuation">(</span><span class="signature-highlight">stream</span><span class="signature-punctuation">:</span><span class="signature-text">inout</span></span><span class="signature-group"> <span class="signature-text">Source</span><span class="signature-punctuation">)</span></span><span class="signature-group"> <span class="signature-text">throws</span></span><span class="signature-group"> <span class="signature-punctuation">-&gt;</span></span><span class="signature-group"> <span class="signature-text">Self</span></span></a></code><p class="topic-symbol-blurb">Decompresses a planar image from the given data source.</p></div><div class="topic-container-symbol"><code class="signature"><a href="https://kelvin13.github.io/jpeg/JPEG/Data/Planar/decompress%28path%3A%29"><span class="signature-group"><span class="signature-text">static</span></span><span class="signature-group"> <span class="signature-text">func</span></span><span class="signature-group"> <span class="signature-highlight">decompress</span><span class="signature-punctuation">(</span><span class="signature-highlight">path</span><span class="signature-punctuation">:</span><span class="signature-text">String</span><span class="signature-punctuation">)</span></span><span class="signature-group"> <span class="signature-text">throws</span></span><span class="signature-group"> <span class="signature-punctuation">-&gt;</span></span><span class="signature-group"> <span class="signature-text">Self</span><span class="signature-punctuation">?</span></span></a></code><p class="topic-symbol-blurb">Decompresses a planar image from the given file path.</p></div></div></div><div class="topic"><div class="topic-container-right"><h3>Saving an image</h3></div><div class="topic-container-left"><div class="topic-container-symbol"><code class="signature"><a href="https://kelvin13.github.io/jpeg/JPEG/Data/Planar/compress%28stream%3Aquanta%3A%29"><span class="signature-group"><span class="signature-text">func</span></span><span class="signature-group"> <span class="signature-highlight">compress</span><span class="signature-punctuation">&lt;</span><span class="signature-text">Destination</span><span class="signature-punctuation">&gt;</span><span class="signature-punctuation">(</span><span class="signature-highlight">stream</span><span class="signature-punctuation">:</span><span class="signature-text">inout</span></span><span class="signature-group"> <span class="signature-text">Destination</span><span class="signature-punctuation">,</span></span><span class="signature-group"> <span class="signature-highlight">quanta</span><span class="signature-punctuation">:</span><span class="signature-punctuation">[</span><span class="signature-text">JPEG</span><span class="signature-punctuation">.</span><span class="signature-text">Table</span><span class="signature-punctuation">.</span><span class="signature-text">Quantization</span><span class="signature-punctuation">.</span><span class="signature-text">Key</span><span class="signature-punctuation">:</span></span><span class="signature-group"> <span class="signature-punctuation">[</span><span class="signature-text">UInt16</span><span class="signature-punctuation">]</span><span class="signature-punctuation">]</span><span class="signature-punctuation">)</span></span><span class="signature-group"> <span class="signature-text">throws</span></span></a></code><p class="topic-symbol-blurb">Compresses a planar image to the given data destination.</p></div><div class="topic-container-symbol"><code class="signature"><a href="https://kelvin13.github.io/jpeg/JPEG/Data/Planar/compress%28path%3Aquanta%3A%29"><span class="signature-group"><span class="signature-text">func</span></span><span class="signature-group"> <span class="signature-highlight">compress</span><span class="signature-punctuation">(</span><span class="signature-highlight">path</span><span class="signature-punctuation">:</span><span class="signature-text">String</span><span class="signature-punctuation">,</span></span><span class="signature-group"> <span class="signature-highlight">quanta</span><span class="signature-punctuation">:</span><span class="signature-punctuation">[</span><span class="signature-text">JPEG</span><span class="signature-punctuation">.</span><span class="signature-text">Table</span><span class="signature-punctuation">.</span><span class="signature-text">Quantization</span><span class="signature-punctuation">.</span><span class="signature-text">Key</span><span class="signature-punctuation">:</span></span><span class="signature-group"> <span class="signature-punctuation">[</span><span class="signature-text">UInt16</span><span class="signature-punctuation">]</span><span class="signature-punctuation">]</span><span class="signature-punctuation">)</span></span><span class="signature-group"> <span class="signature-text">throws</span></span><span class="signature-group"> <span class="signature-punctuation">-&gt;</span></span><span class="signature-group"> <span class="signature-text">Void</span><span class="signature-punctuation">?</span></span></a></code><p class="topic-symbol-blurb">Compresses a planar image to the given file path.</p></div></div></div><div class="topic"><div class="topic-container-right"><h3>Querying an image</h3></div><div class="topic-container-left"><div class="topic-container-symbol"><code class="signature"><a href="https://kelvin13.github.io/jpeg/JPEG/Data/Planar/size"><span class="signature-group"><span class="signature-text">let</span></span><span class="signature-group"> <span class="signature-highlight">size</span><span class="signature-punctuation">:</span><span class="signature-punctuation">(</span><span class="signature-text">x</span><span class="signature-punctuation">:</span><span class="signature-text">Int</span><span class="signature-punctuation">,</span></span><span class="signature-group"> <span class="signature-text">y</span><span class="signature-punctuation">:</span><span class="signature-text">Int</span><span class="signature-punctuation">)</span></span></a></code><p class="topic-symbol-blurb">The size of this image, in pixels.</p></div><div class="topic-container-symbol"><code class="signature"><a href="https://kelvin13.github.io/jpeg/JPEG/Data/Planar/layout"><span class="signature-group"><span class="signature-text">let</span></span><span class="signature-group"> <span class="signature-highlight">layout</span><span class="signature-punctuation">:</span><span class="signature-text">JPEG</span><span class="signature-punctuation">.</span><span class="signature-text">Layout</span><span class="signature-punctuation">&lt;</span><span class="signature-text">Format</span><span class="signature-punctuation">&gt;</span></span></a></code><p class="topic-symbol-blurb">The layout of this image.</p></div><div class="topic-container-symbol"><code class="signature"><a href="https://kelvin13.github.io/jpeg/JPEG/Data/Planar/metadata"><span class="signature-group"><span class="signature-text">let</span></span><span class="signature-group"> <span class="signature-highlight">metadata</span><span class="signature-punctuation">:</span><span class="signature-punctuation">[</span><span class="signature-text">JPEG</span><span class="signature-punctuation">.</span><span class="signature-text">Metadata</span><span class="signature-punctuation">]</span></span></a></code><p class="topic-symbol-blurb">The metadata records in this image.</p></div></div></div><div class="topic"><div class="topic-container-right"><h3>Changing representations</h3></div><div class="topic-container-left"><div class="topic-container-symbol"><code class="signature"><a href="https://kelvin13.github.io/jpeg/JPEG/Data/Planar/interleaved%28cosite%3A%29"><span class="signature-group"><span class="signature-text">func</span></span><span class="signature-group"> <span class="signature-highlight">interleaved</span><span class="signature-punctuation">(</span><span class="signature-highlight">cosite</span><span class="signature-punctuation">:</span><span class="signature-text">Bool</span><span class="signature-punctuation">)</span></span><span class="signature-group"> <span class="signature-punctuation">-&gt;</span></span><span class="signature-group"> <span class="signature-text">JPEG</span><span class="signature-punctuation">.</span><span class="signature-text">Data</span><span class="signature-punctuation">.</span><span class="signature-text">Rectangular</span><span class="signature-punctuation">&lt;</span><span class="signature-text">Format</span><span class="signature-punctuation">&gt;</span></span></a></code><p class="topic-symbol-blurb">Converts this planar image into its rectangular representation.</p></div><div class="topic-container-symbol"><code class="signature"><a href="https://kelvin13.github.io/jpeg/JPEG/Data/Planar/fdct%28quanta%3A%29"><span class="signature-group"><span class="signature-text">func</span></span><span class="signature-group"> <span class="signature-highlight">fdct</span><span class="signature-punctuation">(</span><span class="signature-highlight">quanta</span><span class="signature-punctuation">:</span><span class="signature-punctuation">[</span><span class="signature-text">JPEG</span><span class="signature-punctuation">.</span><span class="signature-text">Table</span><span class="signature-punctuation">.</span><span class="signature-text">Quantization</span><span class="signature-punctuation">.</span><span class="signature-text">Key</span><span class="signature-punctuation">:</span></span><span class="signature-group"> <span class="signature-punctuation">[</span><span class="signature-text">UInt16</span><span class="signature-punctuation">]</span><span class="signature-punctuation">]</span><span class="signature-punctuation">)</span></span><span class="signature-group"> <span class="signature-punctuation">-&gt;</span></span><span class="signature-group"> <span class="signature-text">JPEG</span><span class="signature-punctuation">.</span><span class="signature-text">Data</span><span class="signature-punctuation">.</span><span class="signature-text">Spectral</span><span class="signature-punctuation">&lt;</span><span class="signature-text">Format</span><span class="signature-punctuation">&gt;</span></span></a></code><p class="topic-symbol-blurb">Converts this planar image into its spectral representation.</p></div></div></div><div class="topic"><div class="topic-container-right"><h3>Accessing planes</h3></div><div class="topic-container-left"><div class="topic-container-symbol"><code class="signature"><a href="https://kelvin13.github.io/jpeg/JPEG/Data/Planar/%5B_%3A%5D"><span class="signature-group"><span class="signature-highlight">subscript</span><span class="signature-punctuation">[</span><span class="signature-text">Int</span><span class="signature-punctuation">]</span></span><span class="signature-group"> <span class="signature-punctuation">-&gt;</span></span><span class="signature-group"> <span class="signature-text">Plane</span></span></a></code><p class="topic-symbol-blurb">Accesses the plane at the given index.</p><p class="topic-symbol-relationships">Implements requirement in <code><span class="syntax-group"><a href="https://developer.apple.com/documentation/swift/randomaccesscollection" class="syntax-type syntax-swift-type">RandomAccessCollection</a></span></code>.</p></div><div class="topic-container-symbol"><code class="signature"><a href="https://kelvin13.github.io/jpeg/JPEG/Data/Planar/startIndex"><span class="signature-group"><span class="signature-text">var</span></span><span class="signature-group"> <span class="signature-highlight">startIndex</span><span class="signature-punctuation">:</span><span class="signature-text">Int</span></span></a></code><p class="topic-symbol-blurb">The index of the first plane in this image.</p><p class="topic-symbol-relationships">Implements requirement in <code><span class="syntax-group"><a class="syntax-type syntax-swift-type" href="https://developer.apple.com/documentation/swift/randomaccesscollection">RandomAccessCollection</a></span></code>.</p></div><div class="topic-container-symbol"><code class="signature"><a href="https://kelvin13.github.io/jpeg/JPEG/Data/Planar/endIndex"><span class="signature-group"><span class="signature-text">var</span></span><span class="signature-group"> <span class="signature-highlight">endIndex</span><span class="signature-punctuation">:</span><span class="signature-text">Int</span></span></a></code><p class="topic-symbol-blurb">The index one greater than the index of the last plane in this image.</p><p class="topic-symbol-relationships">Implements requirement in <code><span class="syntax-group"><a href="https://developer.apple.com/documentation/swift/randomaccesscollection" class="syntax-type syntax-swift-type">RandomAccessCollection</a></span></code>.</p></div><div class="topic-container-symbol"><code class="signature"><a href="https://kelvin13.github.io/jpeg/JPEG/Data/Planar/index%28forKey%3A%29"><span class="signature-group"><span class="signature-text">func</span></span><span class="signature-group"> <span class="signature-highlight">index</span><span class="signature-punctuation">(</span><span class="signature-highlight">forKey</span><span class="signature-punctuation">:</span><span class="signature-text">JPEG</span><span class="signature-punctuation">.</span><span class="signature-text">Component</span><span class="signature-punctuation">.</span><span class="signature-text">Key</span><span class="signature-punctuation">)</span></span><span class="signature-group"> <span class="signature-punctuation">-&gt;</span></span><span class="signature-group"> <span class="signature-text">Int</span><span class="signature-punctuation">?</span></span></a></code><p class="topic-symbol-blurb">Returns the index of the plane storing the color channel represented by the given component key, or <code>nil</code> if the component key is a non-recognized component.</p></div><div class="topic-container-symbol"><code class="signature"><a href="https://kelvin13.github.io/jpeg/JPEG/Data/Planar/read%28ci%3A_%3A%29"><span class="signature-group"><span class="signature-text">func</span></span><span class="signature-group"> <span class="signature-highlight">read</span><span class="signature-punctuation">&lt;</span><span class="signature-text">R</span><span class="signature-punctuation">&gt;</span><span class="signature-punctuation">(</span><span class="signature-highlight">ci</span><span class="signature-punctuation">:</span><span class="signature-text">JPEG</span><span class="signature-punctuation">.</span><span class="signature-text">Component</span><span class="signature-punctuation">.</span><span class="signature-text">Key</span><span class="signature-punctuation">,</span></span><span class="signature-group"> <span class="signature-punctuation">(</span><span class="signature-text">Plane</span><span class="signature-punctuation">)</span></span><span class="signature-group"> <span class="signature-text">throws</span></span><span class="signature-group"> <span class="signature-text">-&gt;</span></span><span class="signature-group"> <span class="signature-text">R</span><span class="signature-punctuation">)</span></span><span class="signature-group"> <span class="signature-text">rethrows</span></span><span class="signature-group"> <span class="signature-punctuation">-&gt;</span></span><span class="signature-group"> <span class="signature-text">R</span></span></a></code><p class="topic-symbol-blurb">Calls the given closure on the plane for the given component key.</p></div><div class="topic-container-symbol"><code class="signature"><a href="https://kelvin13.github.io/jpeg/JPEG/Data/Planar/with%28ci%3A_%3A%29"><span class="signature-group"><span class="signature-text">mutating</span></span><span class="signature-group"> <span class="signature-text">func</span></span><span class="signature-group"> <span class="signature-highlight">with</span><span class="signature-punctuation">&lt;</span><span class="signature-text">R</span><span class="signature-punctuation">&gt;</span><span class="signature-punctuation">(</span><span class="signature-highlight">ci</span><span class="signature-punctuation">:</span><span class="signature-text">JPEG</span><span class="signature-punctuation">.</span><span class="signature-text">Component</span><span class="signature-punctuation">.</span><span class="signature-text">Key</span><span class="signature-punctuation">,</span></span><span class="signature-group"> <span class="signature-punctuation">(</span><span class="signature-text">inout</span></span><span class="signature-group"> <span class="signature-text">Plane</span><span class="signature-punctuation">)</span></span><span class="signature-group"> <span class="signature-text">throws</span></span><span class="signature-group"> <span class="signature-text">-&gt;</span></span><span class="signature-group"> <span class="signature-text">R</span><span class="signature-punctuation">)</span></span><span class="signature-group"> <span class="signature-text">rethrows</span></span><span class="signature-group"> <span class="signature-punctuation">-&gt;</span></span><span class="signature-group"> <span class="signature-text">R</span></span></a></code><p class="topic-symbol-blurb">Calls the given closure on the plane for the given component key.</p></div></div></div><div class="topic"><div class="topic-container-right"><h3>Structures</h3></div><div class="topic-container-left"><div class="topic-container-symbol"><code class="signature"><a href="https://kelvin13.github.io/jpeg/JPEG/Data/Planar/Plane"><span class="signature-group"><span class="signature-text">struct</span></span><span class="signature-group"> <span class="signature-highlight">JPEG</span><span class="signature-punctuation">.</span><span class="signature-highlight">Data</span><span class="signature-punctuation">.</span><span class="signature-highlight">Planar</span><span class="signature-punctuation">.</span><span class="signature-highlight">Plane</span></span></a></code><p class="topic-symbol-blurb">A plane of an image in the spatial domain, containing one color channel.</p></div></div></div><div class="topic"><div class="topic-container-right"><h3>See also</h3></div><div class="topic-container-left"><div class="topic-container-symbol"><code class="signature"><a href="https://kelvin13.github.io/jpeg/JPEG/Data/Spectral"><span class="signature-group"><span class="signature-text">struct</span></span><span class="signature-group"> <span class="signature-highlight">JPEG</span><span class="signature-punctuation">.</span><span class="signature-highlight">Data</span><span class="signature-punctuation">.</span><span class="signature-highlight">Spectral</span><span class="signature-punctuation">&lt;</span><span class="signature-text">Format</span><span class="signature-punctuation">&gt;</span></span></a></code><p class="topic-symbol-blurb">A planar image represented in the frequency domain.</p></div><div class="topic-container-symbol"><code class="signature"><a href="https://kelvin13.github.io/jpeg/JPEG/Data/Rectangular"><span class="signature-group"><span class="signature-text">struct</span></span><span class="signature-group"> <span class="signature-highlight">JPEG</span><span class="signature-punctuation">.</span><span class="signature-highlight">Data</span><span class="signature-punctuation">.</span><span class="signature-highlight">Rectangular</span><span class="signature-punctuation">&lt;</span><span class="signature-text">Format</span><span class="signature-punctuation">&gt;</span></span></a></code><p class="topic-symbol-blurb">A rectangular image.</p></div></div></div></div></section></main>
</body>
</html>